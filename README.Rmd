---
title: "Intensity Functional Principal Component Analysis (IFPCA)"
output: github_document
---

```{r}
library(IFPCA)
library(data.table)
```

```{r}
i <- 3 # 1, 2, 3 
```

```{r}
# time for each code (training + validation)
time_code <- fread(paste0("data-raw/time_code", i, ".csv"))
time <- time_code$month
names(time) <- time_code$id
str(time)
```

```{r}
# follow up time for training and validation sets
follow_up_train <- fread("data-raw/follow_up_train.csv")
follow_up_valid <- fread("data-raw/follow_up_valid.csv")
fu_train <- follow_up_train$fu_time
fu_valid <- follow_up_valid$fu_time
names(fu_train) <- follow_up_train$id
names(fu_valid) <- follow_up_valid$id
str(fu_train)
str(fu_valid)
```

```{r}
system.time(NEW <- ifpca(time, fu_train, fu_valid))
```

```{r}
data.table(NEW$TrainFt) # Features (Training Set)
data.table(NEW$TrainSc)
```

```{r}
data.table(NEW$ValidFt) # Features (Validation Set)
data.table(NEW$ValidSc)
```
